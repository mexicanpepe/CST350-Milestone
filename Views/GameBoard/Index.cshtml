@model CST350_Minesweeper.Models.GameBoard

<div class="container text-center">
    <h1>Minesweeper</h1>

    <!-- Display the timer -->
    <div class="mb-3">
        <strong>Time:</strong> <span id="timer">@ViewData["ElapsedTime"]</span>
    </div>

    <!-- Game board partial view -->
    <div id="gameBoard">
        @await Html.PartialAsync("_GameBoard", Model)
    </div>

    <!-- Game Over partial view -->
    <div id="gameOver"></div>
</div>

@section Scripts {
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script>
            $(document).ready(function () {
                // Handle left click to reveal cell
                $(document).on('submit', '.reveal-cell-form', function (e) {
                    e.preventDefault();
                    var form = $(this);
                    $.post(form.attr('action'), form.serialize(), function (result) {
                        $('#gameBoard').html(result);
                    });
                });

                // Handle right-click to flag/unflag cell
                $(document).on('contextmenu', '.reveal-cell-form button', function (e) {
                    e.preventDefault();
                    var form = $(this).closest('form');
                    var url = '@Url.Action("ToggleFlag", "GameBoard")';
                    $.post(url, form.serialize(), function (result) {
                        $('#gameBoard').html(result);
                    });
                });
            });
        </script>
}
